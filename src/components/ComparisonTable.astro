---
interface Product {
  name: string;
  price: string;
  weight: string;
  cpu: string;
  battery: string;
  display: string;
  target: string;
  productId: string;
  isBest?: boolean;
}

interface Props {
  products: Product[];
}

const { products } = Astro.props;
---

<div class="comparison-table-wrapper">
  <table class="comparison-table">
    <thead>
      <tr>
        <th>제품명</th>
        <th>가격</th>
        <th>무게</th>
        <th>CPU</th>
        <th>배터리</th>
        <th>디스플레이</th>
        <th>추천 대상</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {products.map(p => (
        <tr class={p.isBest ? 'highlight-row' : ''}>
          <td>
            <div class="product-cell">
              <div class="product-thumb">&#128187;</div>
              {p.name}
              {p.isBest && <span class="best-badge">BEST</span>}
            </div>
          </td>
          <td><strong>{p.price}</strong></td>
          <td>{p.weight}</td>
          <td>{p.cpu}</td>
          <td>{p.battery}</td>
          <td>{p.display}</td>
          <td>{p.target}</td>
          <td><a href="#" class="table-cta" data-product={p.productId}>최저가</a></td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

<style>
  .comparison-table-wrapper {
    overflow-x: auto; border-radius: var(--radius-lg);
    border: 1px solid var(--border); background: var(--bg-card);
  }
  .comparison-table { width: 100%; border-collapse: collapse; font-size: 14px; }
  .comparison-table thead { background: var(--bg-secondary); }
  .comparison-table th {
    padding: 14px 20px; text-align: left; font-weight: 600;
    color: var(--text-secondary); font-size: 13px; text-transform: uppercase;
    letter-spacing: 0.04em; border-bottom: 1px solid var(--border); white-space: nowrap;
  }
  .comparison-table td {
    padding: 16px 20px; border-bottom: 1px solid var(--border-light); vertical-align: middle;
  }
  .comparison-table tbody tr { transition: background var(--transition); }
  .comparison-table tbody tr:hover { background: var(--bg-secondary); }
  .comparison-table tbody tr:last-child td { border-bottom: none; }
  .highlight-row { background: #fffbeb; border-left: 3px solid var(--accent); }
  .highlight-row:hover { background: #fef9e7 !important; }
  .product-cell { display: flex; align-items: center; gap: 12px; font-weight: 600; white-space: nowrap; }
  .product-thumb {
    width: 48px; height: 48px; background: var(--bg-secondary);
    border-radius: var(--radius); display: flex; align-items: center;
    justify-content: center; flex-shrink: 0; font-size: 20px;
  }
  .best-badge {
    display: inline-block; padding: 2px 8px; border-radius: 4px;
    background: linear-gradient(135deg, var(--accent), #f97316);
    color: #fff; font-size: 11px; font-weight: 700; margin-left: 8px;
  }
  .table-cta {
    padding: 8px 16px; font-size: 13px; font-weight: 600;
    border-radius: var(--radius); background: var(--primary); color: #fff;
    border: none; cursor: pointer; transition: all var(--transition); white-space: nowrap;
    display: inline-block;
  }
  .table-cta:hover { background: var(--primary-dark); color: #fff; }

  @media (max-width: 768px) {
    .comparison-table { font-size: 13px; }
    .comparison-table th, .comparison-table td { padding: 12px; }
  }
</style>
